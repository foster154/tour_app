<% provide(:title, 'Sign up') %>
<% content_for :head do %>
	<%= tag :meta, name: "stripe-key", content: STRIPE_PUBLIC_KEY %>
<% end %>
<h1>Sign up</h1>

<div class="row">
	<div class="col-md-4 col-md-offset-4
				col-sm-6 col-sm-offset-3
				col-xs-10 col-xs-offset-1">

		<%= bootstrap_form_for(resource, as: resource_name, url: registration_path(resource_name), html: {class: "card_form"})  do |f| %>
		  <%= devise_error_messages! %>



		  <%= f.text_field :first_name, layout: :inline, hide_label: true, placeholder: "First Name", autofocus: true, required: true %>

		  <%= f.text_field :last_name, layout: :inline, hide_label: true, placeholder: "Last Name", required: true %>

		  <%= f.email_field :email, hide_label: true, placeholder: "Email Address", required: true %>

		  <%= f.password_field :password, autocomplete: "off", hide_label: true, placeholder: "Password", required: true %>

		  <%= f.password_field :password_confirmation, autocomplete: "off", hide_label: true, placeholder: "Confirm Password", required: true %>

		  <br /><hr /><br />

		  	<div id="stripe_error" class="alert alert-error" style="display:none"></div>

		  	<% if @user.stripe_token %>
  				<p> Credit card has been provided. </p>
			<% else %>
			  <div class="field margin-top25">
			    <%= label_tag :card_number, "Credit Card Number" %>
			    <%= text_field_tag :card_number, nil, name: nil, class: "card-fields" %>
			  </div>
			  <div class="field margin-top25 clear">
			    <%= label_tag :card_code, "Card Security Code (CVV)" %>
			    <%= text_field_tag :card_code, nil, name: nil, size: 6, class: "card-fields" %>
			  </div>
			  <div class="field margin-top25 clear">
			    <%= label_tag :card_month, "Card Expiration" %>
			    <div class="card-fields">
			    <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"} %>
			    <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"} %>
			    </div>
			  </div>
			  <div class="field margin-top25 clear">
			    <% f.text_field :coupon, label: "Promotional Coupon (if any)" %>
			  </div>
			<% end %>

			<%= f.hidden_field :stripe_token %>

		  <br />
		  <div class="span7 clear text-center">
		  	<%= f.submit "Sign up", class: "btn btn-primary", :'data-no-turbolink' => "true" %>
		  </div>
		<% end %>
	</div>
</div>

<div class="row">
	<div class="span7 text-center margin-top25">
		Already have an account? <%= link_to "Sign In", new_user_session_path %>
	</div>

</div>
